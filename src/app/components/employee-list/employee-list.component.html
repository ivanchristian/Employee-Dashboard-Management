<div class="card">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Employee List</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="row mb-3">
        <div class="col-md-4">
          <mat-form-field appearance="outline">
            <mat-label>Search by First Name</mat-label>
            <input
              matInput
              [(ngModel)]="searchQuery.firstName"
              (ngModelChange)="search()"
            />
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field appearance="outline">
            <mat-label>Search by Email</mat-label>
            <input
              matInput
              [(ngModel)]="searchQuery.email"
              (ngModelChange)="search()"
            />
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field appearance="outline">
            <mat-label>Rows per page</mat-label>
            <mat-select
              [(ngModel)]="pageSize"
              (ngModelChange)="onPageSizeChange()"
            >
              <mat-option value="10">10</mat-option>
              <mat-option value="25">25</mat-option>
              <mat-option value="50">50</mat-option>
              <mat-option value="100">100</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <table
        mat-table
        [dataSource]="employees"
        matSort
        (matSortChange)="sortData($event)"
        class="w-100"
      >
        <ng-container matColumnDef="username">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Username</th>
          <td mat-cell *matCellDef="let employee">{{ employee.username }}</td>
        </ng-container>
        <ng-container matColumnDef="firstName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>First Name</th>
          <td mat-cell *matCellDef="let employee">{{ employee.firstName }}</td>
        </ng-container>
        <ng-container matColumnDef="lastName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
          <td mat-cell *matCellDef="let employee">{{ employee.lastName }}</td>
        </ng-container>
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
          <td mat-cell *matCellDef="let employee">{{ employee.email }}</td>
        </ng-container>
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let employee">
            <button
              mat-raised-button
              color="warn"
              class="me-2"
              (click)="editEmployee(employee.username)"
            >
              Edit
            </button>
            <button
              mat-raised-button
              color="accent"
              (click)="deleteEmployee(employee.username)"
            >
              Delete
            </button>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
      <mat-paginator
        [pageSizeOptions]="[10, 25, 50, 100]"
        [pageSize]="pageSize"
        [length]="totalEmployees"
        (page)="onPageChange($event)"
      ></mat-paginator>
      <button
        mat-raised-button
        color="primary"
        class="mt-3"
        (click)="navigateToAddEmployee()"
      >
        Add Employee
      </button>
    </mat-card-content>
  </mat-card>
</div>
